var zlibjs = require('../bin/node-zlib.js');
var zlib = require('zlib');

function do_test(src) {
  var srcStr = JSON.stringify(src);
  try{
    var compressed = zlibjs.deflateSync(src);
    console.log(compressed);
    var inflated = zlibjs.inflateSync(compressed);
    console.log("zlib.js:", inflated);
    zlib.inflate(
      compressed,
      function(err, buffer) {
        console.log("built-in:", buffer);
      }
    );

    var inflatedStr = JSON.stringify(inflated);
    if (srcStr!=inflatedStr) {
      console.log("not equal: " + src + " to " + inflated);
    }
  }catch(ex){
    console.log(ex.message, "src:"+srcStr);
  }
}

do_test([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,228,0,0,0,0,0,0,97,0,0,215,0,0,0,0,0,97,127,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,174,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,44,166,0,0,0,0,101,0,0,0,80,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,139,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,186,0,111,0,0,218,0,0,0,0,0,0,0,0,0,0,0,111]);
