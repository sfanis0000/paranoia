/**!
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2017, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met: 
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer. 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution. 
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @licence Simplified BSD License
 */
window.OSjs=window.OSjs||{},function(t,n,e,o,i,r){"use strict";function c(){var t=Array.prototype.slice.call(arguments,0);return t.unshift(a),OSjs.API.__.apply(this,t)}var a={bg_BG:{"Insert URL":"Въведи URL"},de_DE:{"Insert URL":"URL einfügen"},es_ES:{"Insert URL":"Insertar URL"},fr_FR:{"Insert URL":"Insérer une URL"},ar_DZ:{"Insert URL":"أدخل رابط"},it_IT:{"Insert URL":"Inserisci URL"},ko_KR:{"Insert URL":"링크 삽입"},nl_NL:{"Insert URL":"URL invoegen"},no_NO:{"Insert URL":"Sett inn URL"},pl_PL:{"Insert URL":"Wpisz URL"},ru_RU:{"Insert URL":"Вставить ссылку"},sk_SK:{"Insert URL":"Vložiť URL"},tr_TR:{"Insert URL":"URL ekle"},vi_VN:{"Insert URL":"Thêm URL"}};OSjs.Applications=OSjs.Applications||{},OSjs.Applications.ApplicationWriter=OSjs.Applications.ApplicationWriter||{},OSjs.Applications.ApplicationWriter._=c}(OSjs.Helpers.DefaultApplication,OSjs.Helpers.DefaultApplicationWindow,OSjs.GUI,OSjs.Dialogs,OSjs.VFS,OSjs.Utils),function(t,n,e,o,i,r,c,a){"use strict";function s(t,e,o,i){var r=OSjs.Core.getConfig();n.apply(this,["ApplicationWriterWindow",{allow_drop:!0,icon:e.icon,title:e.name,width:550,height:400,translator:OSjs.Applications.ApplicationWriter._},t,o,i]),this.checkChangeLength=-1,this.checkChangeInterval=null,this.color={background:"#ffffff",foreground:"#000000"},this.font={name:r.Fonts.default,size:3}}function l(n,e){t.apply(this,["ApplicationWriter",n,e,{extension:"odoc",mime:"osjs/document",filename:"New text file.odoc"}])}s.prototype=Object.create(n.prototype),s.constructor=n.prototype,s.prototype.destroy=function(){return this.checkChangeInterval=clearInterval(this.checkChangeInterval),n.prototype.destroy.apply(this,arguments)},s.prototype.init=function(t,e,o){function s(t){j[t.detail.id]&&j[t.detail.id]()}function l(){function t(t){return S.query(t)}var n={fontName:(t("fontName")||"").split(",")[0].replace(/^'/,"").replace(/'$/,""),fontSize:parseInt(t("fontSize"),10)||m.font.size,foreColor:t("foreColor"),hiliteColor:t("hiliteColor")};return Object.keys(y).forEach(function(e){var o=y[e];n[o.command]={button:e,value:t(o.command)}}),n}function u(t,n){m._toggleDisabled(!0),r.createDialog("Color",{color:t},function(t,e,o){m._toggleDisabled(!1),"ok"===e&&o&&n(o.hex)},m)}function p(t,n){m._toggleDisabled(!0),r.createDialog("Font",{fontSize:m.font.size,fontName:m.font.name,minSize:1,maxSize:8,unit:"null"},function(t,e,o){m._toggleDisabled(!1),"ok"===e&&o&&n(o)},m)}function f(t){L.set("value",t.hiliteColor),_.set("value",t.foreColor),t.fontName&&I.set("label",i.format("{0} ({1})",t.fontName,t.fontSize.toString()))}function d(){f(l())}var h=n.prototype.init.apply(this,arguments),m=this,g=OSjs.Applications.ApplicationWriter._;this._render("WriterWindow");var S=this._find("Text"),y={"text-bold":{command:"bold"},"text-italic":{command:"italic"},"text-underline":{command:"underline"},"text-strikethrough":{command:"strikeThrough"},"justify-left":{command:"justifyLeft"},"justify-center":{command:"justifyCenter"},"justify-right":{command:"justifyRight"},indent:{command:"indent"},unindent:{command:"outdent"}},j={MenuUndo:function(){S.command("undo",!1)},MenuRedo:function(){S.command("redo",!1)},MenuCopy:function(){S.command("copy",!1)},MenuCut:function(){S.command("cut",!1)},MenuDelete:function(){S.command("delete",!1)},MenuPaste:function(){S.command("paste",!1)},MenuUnlink:function(){S.command("unlink",!1)},MenuInsertOL:function(){S.command("insertOrderedList",!1)},MenuInsertUL:function(){S.command("insertUnorderedList",!1)},MenuInsertImage:function(){r.createDialog("File",{filter:["^image"]},function(t,n,e){"ok"===n&&e&&c.url(e,function(t,n){S.command("insertImage",!1,n)})},m)},MenuInsertLink:function(){r.createDialog("Input",{message:g("Insert URL"),placeholder:"https://os-js.org"},function(t,n,e){"ok"===n&&e&&S.command("createLink",!1,e)},m)}};this._find("SubmenuEdit").on("select",s),this._find("SubmenuInsert").on("select",s);var L=this._find("Background").on("click",function(){u(m.color.background,function(t){S.command("hiliteColor",!1,t),m.color.background=t,L.set("value",t)})}),_=this._find("Foreground").on("click",function(){u(m.color.foreground,function(t){S.command("foreColor",!1,t),m.color.foreground=t,_.set("value",t)})}),I=this._find("Font").on("click",function(){p(null,function(t){S.command("fontName",!1,t.fontName),S.command("fontSize",!1,t.fontSize),m.font.name=t.fontName,m.font.size=t.fontSize})});return h.querySelectorAll("gui-toolbar > gui-button").forEach(function(t){var n=t.getAttribute("data-id"),e=y[n];e&&a.Element.createFromNode(t).on("click",function(){S.command(e.command)}).on("mousedown",function(t){t.preventDefault()})}),L.set("value",this.color.background),_.set("value",this.color.foreground),I.set("label",i.format("{0} ({1})",this.font.name,this.font.size.toString())),S.on("selection",function(){d()}),this.checkChangeInterval=setInterval(function(){if(!m.hasChanged){m.checkChangeLength<0&&(m.checkChangeLength=S.get("value").length);var t=S.get("value").length;t!==m.checkChangeLength&&(m.hasChanged=!0),m.checkChangeLength=t}},500),h},s.prototype.updateFile=function(t){n.prototype.updateFile.apply(this,arguments);try{this._find("Text").$element.focus()}catch(t){}this.checkChangeLength=-1},s.prototype.showFile=function(t,e){this._find("Text").set("value",e||""),n.prototype.showFile.apply(this,arguments)},s.prototype.getFileData=function(){return this._find("Text").get("value")},s.prototype._focus=function(t,e){return!!n.prototype._focus.apply(this,arguments)&&(this._find("Text").focus(),!0)},l.prototype=Object.create(t.prototype),l.constructor=t,l.prototype.destroy=function(){return t.prototype.destroy.apply(this,arguments)},l.prototype.init=function(t,n,o){e.prototype.init.call(this,t,n,o);var i=this._getArgument("file");this._addWindow(new s(this,n,o,i))},OSjs.Applications=OSjs.Applications||{},OSjs.Applications.ApplicationWriter=OSjs.Applications.ApplicationWriter||{},OSjs.Applications.ApplicationWriter.Class=Object.seal(l)}(OSjs.Helpers.DefaultApplication,OSjs.Helpers.DefaultApplicationWindow,OSjs.Core.Application,OSjs.Core.Window,OSjs.Utils,OSjs.API,OSjs.VFS,OSjs.GUI);
//# sourceMappingURL=_app.min.js.map